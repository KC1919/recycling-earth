<%-include('partials/header.ejs')%>
<title>Register</title>
</head>
<body>
    <section id="Join">
        <h2 class="join-head">Join Us Now !!!</h2>
        <div class="row Join">
          <div class="col-lg-6" id="Join-box">
            <form onsubmit="handleSubmit(event)" method=POST>
              <div class="form-group">
                <label for="fname"> </label>
                <br>
                <input type="text" name="fname" id="fname" placeholder="First Name" required>
              </div>
              <div class="form-group">
                <label for="lname"> </label>
                <br>
                <input type="text" name="lname" id="lname" placeholder="Last Name" required>
              </div>
              <div class="form-group">
                <label for="email"> </label>
                <br>
                <input type="email" name="email" id="email" placeholder="Email" required>
              </div>

              <div class="form-group">
                <label for="password"> </label>
                <br>
                <input type="password" name="password" id="password" placeholder="Password" minlength="8" maxlength="16" required>
              </div>

              <div class="form-group">
                <label for="phone"> </label>
                <br>
                <input type="number" name="phone" id="phone" placeholder="Phone Number" minlength="10" maxlength="10" required>
              </div>

              <div class="form-group">
                <label for="city"> </label>
                <br>
                <input type="text" name="city" id="city" placeholder="City" required>
              </div>

              <div class="form-group">
                <label for="state"> </label>
                <br>
                <input type="text" name="state" id="state" placeholder="State" required>
              </div>

              <!-- <div class="form-group">
                <label for="country"> </label>
                <br>
                <input type="text" name="country" id="country" placeholder="country" required>
              </div> -->

              <div class="form-group">
                <label for="pincode"> </label>
                <br>
                <input type="number" name="pincode" id="pincode" placeholder="Postal Code" minlength="6" maxlength="6" required>
              </div>

              <!-- <div class="form-group">
                <label for="message"></label>
                <br>
                <textarea name="message" id="message" cols="20" rows="5" placeholder="Type Your Message here" required></textarea>
              </div> -->

              <div class="form-group">
                <button id="btn-Join" type="submit">
                  Join Now
                </button>
              </div>
            </form>
            <a href="/auth/login"><button id="btn-Join">
              Sign in
            </button></a>
          </div>
          <div class="join-us col-lg-6">
            <h2 class="join-us">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
              ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. "</h2>
            <div class="row">
              <div class="join-icon ">
                <i class="icon fa-solid fa-users fa-4x"></i>
                <i class="icon fa-solid fa-dumpster fa-4x"></i>
                <i class="icon fa-solid fa-recycle fa-4x"></i>
                <i class="icon fa-solid fa-earth-americas fa-4x"></i>
              </div>
            </div>
          </div>
      </section>

      <script>
        async function handleSubmit(e) {
          e.preventDefault();
          
          const fname=document.getElementById("fname").value;
          const lname=document.getElementById("lname").value;
          const password=document.getElementById("password").value;
          const phone=document.getElementById("phone").value;
          const email=document.getElementById("email").value;
          const city=document.getElementById("city").value;
          const state=document.getElementById("state").value;
          const pincode=document.getElementById("pincode").value;
    
          const data={
            "fname":fname,
            "lname":lname,
            "password":password,
            "mobile":phone,
            "email":email,
            "city":city,
            "state":state,
            "pincode":pincode
          }

          const response=await fetch("/auth/register",{
            method:"POST",
            mode:"cors",
            headers:{"Content-Type":"application/json"},
            body: JSON.stringify(data)
          });
    
          const json=await response.json();
          alert(json);
        }
      </script>
</body>
</html>